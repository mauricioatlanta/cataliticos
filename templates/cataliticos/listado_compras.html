{% extends "base.html" %}
{% load filtros_whatsapp %}

{% block content %}
  <h1 class="text-3xl font-bold mb-4">Compras</h1>
  <div class="bg-white bg-opacity-10 backdrop-blur-md rounded-lg p-4">
    <table class="min-w-full text-white">
      <thead class="text-sm uppercase border-b border-white border-opacity-20">
        <tr>
          <th class="px-4 py-2 text-left">Cliente</th>
          <th class="px-4 py-2 text-left">Total</th>
          <th class="px-4 py-2 text-left">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for compra in compras %}
        <tr class="border-b border-white border-opacity-10">
          <td class="px-4 py-2">{{ compra.cliente_nombre }}</td>
          <td class="px-4 py-2">${{ compra.total|floatformat:0 }}</td>
          <td class="px-4 py-2 space-x-2">
            <a href="{% url 'cataliticos:editar_compra' compra.id %}" class="text-blue-300 hover:underline">Editar</a>
            <a href="{% url 'cataliticos:eliminar_compra' compra.id %}" class="text-red-300 hover:underline">Eliminar</a>
            <a href="https://wa.me/?text={{ compra|recibo_whatsapp|urlencode }}" target="_blank"
               class="bg-green-600 hover:bg-green-800 text-white text-xs px-2 py-1 rounded">ðŸ“¤ WhatsApp</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
